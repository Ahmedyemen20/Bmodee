<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
      color: #fff;
      min-height: 100vh;
      direction: rtl;
    }
    .download-page {
      max-width: 920px;
      margin: 40px auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 24px;
      align-items: center;
      text-align: center;
    }
    .download-thumb img {
      width: 100%;
      max-width: 420px;
      height: auto;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.5);
    }
    .download-title {
      font-size: 32px;
      font-weight: 700;
      color: #fff;
      margin: 8px 0;
    }
    .download-desc {
      color: #cbd5e1;
      font-size: 16px;
      max-width: 720px;
      line-height: 1.6;
    }
    .download-area {
      width: 100%;
      max-width: 760px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      padding: 24px;
      border-radius: 16px;
      backdrop-filter: blur(10px);
    }
    .versions-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #f1f5f9;
    }
    .version-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 16px;
      margin-bottom: 12px;
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.05);
      transition: all 0.3s ease;
    }
    .version-row:hover {
      background: rgba(255,255,255,0.08);
      border-color: rgba(250,204,21,0.3);
    }
    .ver-info {
      text-align: right;
      color: #cbd5e1;
    }
    .ver-label {
      font-weight: 600;
      color: #f1f5f9;
      margin-bottom: 4px;
    }
    .ver-size {
      font-size: 14px;
      color: #94a3b8;
    }
    .store-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: 600;
      text-decoration: none;
      border: 0;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
    }
    .google-play-btn {
      background: #000;
      color: #fff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .google-play-btn:hover {
      background: #1a1a1a;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }
    .app-store-btn {
      background: #0066CC;
      color: #fff;
      box-shadow: 0 4px 12px rgba(0,102,204,0.3);
    }
    .app-store-btn:hover {
      background: #0077ED;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,102,204,0.4);
    }
    .store-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .countdown {
      font-weight: 700;
      color: #facc15;
      background: rgba(250,204,21,0.1);
      padding: 8px 16px;
      border-radius: 8px;
      display: inline-block;
      font-size: 18px;
    }
    .notice {
      color: #94a3b8;
      font-size: 14px;
      margin-top: 16px;
      line-height: 1.5;
    }
    .source-links {
      margin-top: 16px;
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .alt-link {
      color: #60a5fa;
      text-decoration: none;
      padding: 8px 16px;
      border: 1px solid rgba(96,165,250,0.3);
      border-radius: 8px;
      transition: all 0.3s ease;
    }
    .alt-link:hover {
      background: rgba(96,165,250,0.1);
      border-color: rgba(96,165,250,0.5);
    }
    .back-link {
      color: #a5d8ff;
      text-decoration: none;
      font-size: 16px;
      transition: color 0.3s ease;
    }
    .back-link:hover {
      color: #74c0fc;
    }
    .no-versions {
      color: #94a3b8;
      padding: 20px;
      text-align: center;
    }
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(0,0,0,0.1);
      border-top-color: #000;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      vertical-align: middle;
      margin-right: 8px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .footer {
      text-align: center;
      padding: 32px 16px;
      color: #64748b;
      font-size: 14px;
    }
    .footer-links {
      margin-top: 12px;
    }
    .footer-links a {
      color: #60a5fa;
      text-decoration: none;
      margin: 0 8px;
    }
    @media (max-width: 720px) {
      .download-page {
        margin: 20px 10px;
      }
      .download-title {
        font-size: 24px;
      }
      .version-row {
        flex-direction: column;
        align-items: stretch;
      }
      .ver-info {
        text-align: center;
      }
      .store-buttons {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <main class="download-page" id="downloadPage">
    <div class="download-thumb">
      <img id="dImg" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23334155' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%2394a3b8' font-size='20' font-family='Arial'%3EØµÙˆØ±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©%3C/text%3E%3C/svg%3E" alt="ØµÙˆØ±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©">
    </div>

    <h1 id="dName" class="download-title">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</h1>
    <p id="dDesc" class="download-desc">Ø¬Ø§Ø±Ù Ø¬Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>

    <div class="download-area" id="downloadArea">
      <div id="versionsBlock">
        <div class="versions-title">Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
        <div id="versionList"></div>
        <div id="noVersions" class="no-versions" style="display:none">
          Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥ØµØ¯Ø§Ø±Ø§Øª Ù…ØªØ§Ø­Ø© Ù„Ù„ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹
        </div>
      </div>

      <div id="sourceBlock" style="display:none;">
        <div class="source-links">
          <a id="playSearch" class="alt-link" href="#" target="_blank" rel="noopener noreferrer">
            ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Google Play
          </a>
          <a id="appStoreSearch" class="alt-link" href="#" target="_blank" rel="noopener noreferrer">
            ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ App Store
          </a>
        </div>
      </div>

      <div id="messages" style="text-align:center; margin-top: 16px;"></div>
    </div>

    <a id="backToGame" class="back-link" href="#">Â« Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</a>
  </main>

  <footer class="footer">
    <p>Â© 2026 Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
    <nav class="footer-links">
      <a href="privacy.html">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a> |
      <a href="terms.html">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a>
    </nav>
  </footer>

  <script>
    const PROXY_BASE = 'https://hidden-truth-262e.ahmedyemen20066.workers.dev?url=';

    (function() {
      function getParam(name) {
        return new URL(location.href).searchParams.get(name);
      }

      const nameParam = getParam('name') || '';
      const verParam = getParam('ver') || getParam('version') || '';
      const sizeParam = getParam('size') || '';
      const linkParam = getParam('link') || '';
      const imgParam = getParam('img') || '';
      const descParam = getParam('desc') || '';

      const dImg = document.getElementById('dImg');
      const dName = document.getElementById('dName');
      const dDesc = document.getElementById('dDesc');
      const versionList = document.getElementById('versionList');
      const noVersions = document.getElementById('noVersions');
      const playSearch = document.getElementById('playSearch');
      const appStoreSearch = document.getElementById('appStoreSearch');
      const messages = document.getElementById('messages');
      const backToGame = document.getElementById('backToGame');

      // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
      if (nameParam) {
        dName.textContent = 'ØªØ­Ù…ÙŠÙ„ ' + decodeURIComponent(nameParam);
        document.title = 'ØªØ­Ù…ÙŠÙ„ ' + decodeURIComponent(nameParam);
      }

      if (imgParam) {
        dImg.src = decodeURIComponent(imgParam);
      }

      if (descParam) {
        dDesc.textContent = decodeURIComponent(descParam);
      } else {
        dDesc.textContent = 'Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ù† Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø£Ø¯Ù†Ø§Ù‡';
      }

      // ØªØ¹ÙŠÙŠÙ† Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¨Ø­Ø«
      if (nameParam) {
        const searchQuery = encodeURIComponent(decodeURIComponent(nameParam));
        playSearch.href = `https://play.google.com/store/search?q=${searchQuery}&c=apps`;
        appStoreSearch.href = `https://apps.apple.com/us/search?term=${searchQuery}`;
      }

      // ØªØ¹ÙŠÙŠÙ† Ø±Ø§Ø¨Ø· Ø§Ù„Ø¹ÙˆØ¯Ø©
      if (nameParam) {
        backToGame.href = `game.html?name=${nameParam}`;
      } else {
        backToGame.href = 'index.html';
      }

      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª
      if (verParam && linkParam) {
        const versionRow = document.createElement('div');
        versionRow.className = 'version-row';

        const verInfo = document.createElement('div');
        verInfo.className = 'ver-info';
        
        const verLabel = document.createElement('div');
        verLabel.className = 'ver-label';
        verLabel.textContent = `Ø§Ù„Ø¥ØµØ¯Ø§Ø± ${decodeURIComponent(verParam)}`;
        
        verInfo.appendChild(verLabel);

        if (sizeParam) {
          const verSize = document.createElement('div');
          verSize.className = 'ver-size';
          verSize.textContent = `Ø§Ù„Ø­Ø¬Ù…: ${decodeURIComponent(sizeParam)}`;
          verInfo.appendChild(verSize);
        }

        const storeButtons = document.createElement('div');
        storeButtons.className = 'store-buttons';
        
        // Ø²Ø± Google Play Ù„Ù„Ø¨Ø­Ø«
        const playBtn = document.createElement('a');
        playBtn.className = 'store-btn google-play-btn';
        const searchQuery = encodeURIComponent(decodeURIComponent(nameParam));
        playBtn.href = `https://play.google.com/store/search?q=${searchQuery}&c=apps`;
        playBtn.target = '_blank';
        playBtn.rel = 'noopener noreferrer';
        playBtn.innerHTML = `
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z"/>
          </svg>
          Google Play
        `;
        
        // Ø²Ø± App Store Ù„Ù„Ø¨Ø­Ø«
        const appBtn = document.createElement('a');
        appBtn.className = 'store-btn app-store-btn';
        appBtn.href = `https://apps.apple.com/us/search?term=${searchQuery}`;
        appBtn.target = '_blank';
        appBtn.rel = 'noopener noreferrer';
        appBtn.innerHTML = `
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z"/>
          </svg>
          App Store
        `;

        storeButtons.appendChild(playBtn);
        storeButtons.appendChild(appBtn);
        
        versionRow.appendChild(verInfo);
        versionRow.appendChild(storeButtons);
        versionList.appendChild(versionRow);

        messages.innerHTML = '<p class="notice">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© ÙÙŠ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡</p>';
      } else {
        noVersions.style.display = 'block';
        messages.innerHTML = '<p class="notice">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© ÙÙŠ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø£Ø¹Ù„Ø§Ù‡</p>';
      }

      function startCountdown(button, url) {
        let seconds = 5;
        button.setAttribute('aria-disabled', 'true');
        
        const originalText = button.textContent;
        const countdownInterval = setInterval(() => {
          button.innerHTML = `<span class="loading-spinner"></span>Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ ${seconds} Ø«ÙˆØ§Ù†ÙŠ`;
          seconds--;

          if (seconds < 0) {
            clearInterval(countdownInterval);
            button.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
            window.open(url, '_blank');
            
            setTimeout(() => {
              button.textContent = originalText;
              button.removeAttribute('aria-disabled');
            }, 2000);
          }
        }, 1000);
      }

      // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
      dImg.addEventListener('load', function() {
        this.style.opacity = '0';
        setTimeout(() => {
          this.style.transition = 'opacity 0.5s ease';
          this.style.opacity = '1';
        }, 100);
      });

    })();
  </script>
</body>
</html>
